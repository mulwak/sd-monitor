; FxT65のハードウェア構成を定義する

.PC02 ; CMOS命令を許可

RAMBASE = $0000
UARTBASE = $E000
VIABASE = $E200
YMZBASE = $E400
CRTCBASE = $E600
ROMBASE = $F000

; UART
.PROC UART
  RX = UARTBASE
  TX = UARTBASE
  STATUS = UARTBASE+1
  COMMAND = UARTBASE+2
  CONTROL = UARTBASE+3
  .PROC CMD
    ; PMC1/PMC0/PME/REM/TIC1/TIC0/IRD/DTR
    ; 全てゼロだと「エコーオフ、RTSオフ、割り込み有効、DTRオフ」
    RTS_ON =    %00001000
    ECHO_ON =   %00010000
    RIRQ_OFF =  %00000010
    DTR_ON =    %00000001
  .ENDPROC
.ENDPROC

; VIA
.PROC VIA
  PORTB = VIABASE
  PORTA = VIABASE+1
  DDRB = VIABASE+2
  DDRA = VIABASE+3
  IFR = VIABASE+$D
  .PROC CMD
    ; LCD PIN割り当て
    E   = %10000000
    RW  = %01000000
    RS  = %00100000
  .ENDPROC
.ENDPROC

