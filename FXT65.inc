; FxT65のハードウェア構成を定義する

.PC02 ; CMOS命令を許可

RAMBASE = $0000
UARTBASE = $E000
VIABASE = $E200
YMZBASE = $E400
CRTCBASE = $E600
ROMBASE = $F000

; UART
.PROC UART
  RX = UARTBASE
  TX = UARTBASE
  STATUS = UARTBASE+1
  COMMAND = UARTBASE+2
  CONTROL = UARTBASE+3
  .PROC CMD
    ; PMC1/PMC0/PME/REM/TIC1/TIC0/IRD/DTR
    ; 全てゼロだと「エコーオフ、RTSオフ、割り込み有効、DTRオフ」
    RTS_ON =    %00001000
    ECHO_ON =   %00010000
    RIRQ_OFF =  %00000010
    DTR_ON =    %00000001
  .ENDPROC
  XON = $11
  XOFF = $13
.ENDPROC

; VIA
.PROC VIA
  PORTB = VIABASE
  PORTA = VIABASE+1
  DDRB = VIABASE+2
  DDRA = VIABASE+3
  SR = VIABASE+$A
  ACR = VIABASE+$B
  PCR = VIABASE+$C
  IFR = VIABASE+$D
  IER = VIABASE+$E
  .PROC BPIN
    ; LCD PIN割り当て
    LCD_E   = %10000000
    LCD_RW  = %01000000
    LCD_RS  = %00100000
    SD_CS   = %00010000
    SD_SCK  = %00001000
    SD_MOSI = %00000100
    SD_MISO = %00000010
  .ENDPROC
  ; 新式
  SPI_INOUT  = %10000000  ; 1=in, 0=out
  SPI_CS0    = %01000000
.ENDPROC

